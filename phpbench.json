{
    "$schema": "https://phpbench.github.io/schema/config.json",
    "runner.bootstrap": "vendor/autoload.php",
    "runner.path": [
        "benchmarks"
    ],
    "runner.iterations": 2,
    "runner.revs": 1,
    "runner.retry_threshold": 3,
    "runner.time_unit": "milliseconds",
    "runner.progress": "plain",
    "runner.subject_pattern": "benchFind.*",
    "runner.php_config": {
        "memory_limit": "-1",
        "xdebug.mode": "off"
    },
    "report.generators": {
        "p2p_aggregate": {
            "extends": "aggregate",
            "title": "P2P path finder performance",
            "cols": [
                "subject",
                "set",
                "mode",
                "mean",
                "rstdev",
                "mem_peak"
            ]
        },
        "p2p_bottleneck_breakdown": {
            "generator": "component",
            "title": "Bottleneck mandatory minima scenarios",
            "filter": "subject_name = 'benchFindBottleneckMandatoryMinima'",
            "components": [
                {
                    "component": "table_aggregate",
                    "partition": [
                        "variant_name"
                    ],
                    "row": {
                        "set": "first(partition['variant_name'])",
                        "mode": "mode(partition['result_time_avg']) as time",
                        "mean": "mean(partition['result_time_avg']) as time",
                        "rstdev": "rstdev(partition['result_time_avg'])",
                        "mem_peak": "max(partition['result_mem_peak']) as memory"
                    }
                }
            ]
        },
        "p2p_typed_search_stress": {
            "generator": "component",
            "title": "Typed search pipeline stress scenarios",
            "filter": "subject_name = 'benchFindTypedSearchStress'",
            "components": [
                {
                    "component": "table_aggregate",
                    "partition": [
                        "variant_name"
                    ],
                    "row": {
                        "set": "first(partition['variant_name'])",
                        "mode": "mode(partition['result_time_avg']) as time",
                        "mean": "mean(partition['result_time_avg']) as time",
                        "rstdev": "rstdev(partition['result_time_avg'])",
                        "mem_peak": "max(partition['result_mem_peak']) as memory"
                    }
                }
            ]
        }
    }
}
