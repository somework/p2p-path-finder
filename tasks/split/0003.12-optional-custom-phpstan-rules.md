# Subtask 0003.12: Optional: Custom PHPStan Rules

**Parent Task**: 0003 - Decimal Arithmetic Audit  
**Effort**: L (4-6h)  
**Dependencies**: 0003.1-0003.11

## Description

**OPTIONAL**: Create custom PHPStan rules to automatically detect decimal arithmetic anti-patterns.

## Actions

- [ ] Research PHPStan custom rule development
- [ ] Create rule to detect float literals in arithmetic
- [ ] Create rule to detect string comparisons of numeric values
- [ ] Create rule to detect missing RoundingMode in toScale()
- [ ] Create rule to detect bcmath function calls
- [ ] Test rules against codebase
- [ ] Document rules in CONTRIBUTING.md

## Acceptance Criteria

- Custom PHPStan rules created (if pursuing)
- Rules catch known anti-patterns
- Rules tested against codebase
- False positives minimized
- Rules documented for contributors

## Definition of Done

- [ ] Custom rules created and tested (or task marked as skipped)
- [ ] Rules catch known anti-patterns
- [ ] Rules documented for contributors
- [ ] PHPStan configuration updated
- [ ] Changes committed to version control

## Tests Needed

- Test rules against existing codebase
- Verify rules catch known violations
- Verify no false positives in production code
- Test rules can be bypassed when necessary (with annotations)

## Notes

This is an optional task for long-term maintenance. May be deferred to post-1.0 if time constrained.

